<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard — ProjectHub Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8f9fd;
      --card:#ffffff;
      --accent:#6366f1;
      --accent-hover:#4f46e5;
      --secondary:#10b981;
      --danger:#ef4444;
      --text:#1e293b;
      --muted:#64748b;
      --border:#e2e8f0;
      --shadow-sm:0 4px 12px rgba(0,0,0,0.06);
      --shadow:0 8px 28px rgba(0,0,0,0.08);
      --shadow-lg:0 16px 40px rgba(0,0,0,0.12);
      --radius:16px;
      --radius-sm:12px;
      font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
    }

    *, *::before, *::after {box-sizing:border-box;margin:0;padding:0}
    body{
      background:linear-gradient(135deg, #f0f4ff 0%, #e0eaff 100%);
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
      line-height:1.6;
    }

    /* ==== Animations ==== */
    @keyframes fadeIn {
      from {opacity:0;transform:translateY(12px);}
      to {opacity:1;transform:translateY(0);}
    }
    @keyframes slideUp {
      from {opacity:0;transform:translateY(20px);}
      to {opacity:1;transform:translateY(0);}
    }
    @keyframes pulse {
      0%,100% {transform:scale(1);}
      50% {transform:scale(1.04);}
    }
    @keyframes float {
      0%,100% {transform:translateY(0);}
      50% {transform:translateY(-6px);}
    }
    @keyframes shimmer {
      0% {background-position:-200% center;}
      100% {background-position:200% center;}
    }
    @keyframes spin {
      to {transform:rotate(360deg);}
    }

    .animate-fade {animation:fadeIn 0.6s ease-out forwards;}
    .animate-slide {animation:slideUp 0.7s ease-out forwards;}
    .animate-pulse {animation:pulse 2s infinite ease-in-out;}
    .animate-float {animation:float 3s infinite ease-in-out;}
    .shimmer {
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      background-size:200% 100%;
      animation:shimmer 1.6s infinite;
    }

    /* ==== Navigation ==== */
    nav{
      width:100%;
      background:linear-gradient(135deg, var(--accent), #818cf8);
      color:#fff;
      padding:16px 32px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:var(--shadow);
      position:sticky;
      top:0;
      z-index:1000;
      backdrop-filter:blur(12px);
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    .logo{
      font-weight:700;
      font-size:20px;
      letter-spacing:0.5px;
      display:flex;
      align-items:center;
      gap:10px;
      transition:transform .3s ease;
    }
    .logo:hover {transform:scale(1.05);}
    nav ul{
      display:flex;
      gap:20px;
      list-style:none;
      align-items:center;
    }
    nav ul li a{
      color:#fff;
      text-decoration:none;
      font-weight:500;
      font-size:15px;
      padding:6px 0;
      position:relative;
      transition:all .3s ease;
    }
    nav ul li a::after{
      content:'';
      position:absolute;
      bottom:0;
      left:50%;
      width:0;
      height:2px;
      background:#fff;
      transition:width .3s ease, left .3s ease;
      transform:translateX(-50%);
    }
    nav ul li a:hover::after{width:100%;}
    .admin-display{
      background:rgba(255,255,255,0.18);
      padding:7px 14px;
      border-radius:999px;
      font-weight:600;
      font-size:13px;
      backdrop-filter:blur(8px);
      border:1px solid rgba(255,255,255,0.2);
      animation:animate-float 3s infinite ease-in-out;
    }

    /* ==== Layout ==== */
    .container{
      width:100%;
      max-width:1280px;
      margin:40px auto;
      padding:0 20px;
    }

    /* ==== Stats Grid ==== */
    .stats{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
      gap:20px;
      margin-bottom:44px;
    }
    .stat{
      background:var(--card);
      border-radius:var(--radius);
      padding:28px 24px;
      box-shadow:var(--shadow-sm);
      text-align:center;
      position:relative;
      overflow:hidden;
      transition:all .35s ease;
      opacity:0;
      animation:slideUp 0.7s ease-out forwards;
    }
    .stat::before{
      content:'';
      position:absolute;
      top:0; left:0;
      width:100%; height:4px;
      background:linear-gradient(90deg, var(--accent), var(--secondary));
      transform:scaleX(0);
      transform-origin:left;
      transition:transform .4s ease;
    }
    .stat:hover{
      transform:translateY(-6px);
      box-shadow:var(--shadow-lg);
    }
    .stat:hover::before{transform:scaleX(1);}
    .stat-icon{
      width:56px; height:56px;
      margin:0 auto 16px;
      background:linear-gradient(135deg, var(--accent), var(--secondary));
      border-radius:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:24px;
      color:#fff;
      box-shadow:0 6px 16px rgba(99,102,241,0.3);
    }
    .stat h3{
      font-size:32px;
      font-weight:700;
      color:var(--accent);
      margin:8px 0 4px;
    }
    .stat p{
      font-size:14px;
      color:var(--muted);
      font-weight:500;
    }

    /* ==== Card Base ==== */
    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:32px;
      box-shadow:var(--shadow);
      margin-bottom:40px;
      opacity:0;
      transform:translateY(20px);
      animation:fadeIn 0.8s ease-out forwards;
      transition:box-shadow .3s ease;
    }
    .card:hover{box-shadow:var(--shadow-lg);}
    .card h2{
      font-size:22px;
      font-weight:700;
      margin-bottom:24px;
      color:var(--text);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .card h2::after{
      content:'';
      flex:1;
      height:2px;
      background:linear-gradient(90deg, var(--accent), transparent);
      border-radius:2px;
    }

    /* ==== Search Bar ==== */
    .search-bar{
      display:flex;
      gap:12px;
      margin-bottom:24px;
      max-width:500px;
    }
    .search-bar input{
      flex:1;
      padding:13px 18px;
      border:1px solid var(--border);
      border-radius:var(--radius-sm);
      font-size:15px;
      background:#fff;
      outline:none;
      transition:all .25s ease;
      box-shadow:var(--shadow-sm);
    }
    .search-bar input:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(99,102,241,0.15);
      transform:scale(1.005);
    }
    .search-bar button{
      padding:13px 20px;
      border:none;
      background:linear-gradient(135deg, var(--accent), var(--accent-hover));
      color:#fff;
      border-radius:var(--radius-sm);
      font-weight:600;
      cursor:pointer;
      transition:all .3s ease;
      box-shadow:var(--shadow-sm);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .search-bar button:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 20px rgba(99,102,241,0.25);
    }
    .search-bar button:active{transform:scale(0.98);}

    /* ==== Table ==== */
    .table-wrapper{
      overflow-x:auto;
      border-radius:var(--radius-sm);
      box-shadow:var(--shadow-sm);
      margin-top:8px;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:14.5px;
      min-width:800px;
    }
    th{
      background:#f8fafc;
      color:var(--muted);
      text-transform:uppercase;
      font-size:11.5px;
      font-weight:600;
      letter-spacing:0.8px;
      padding:16px 14px;
      text-align:left;
      border-bottom:2px solid var(--border);
    }
    td{
      padding:16px 14px;
      border-bottom:1px solid var(--border);
      color:var(--text);
      transition:background .2s;
    }
    tr:hover td{
      background:#f1f5ff;
    }
    tr:last-child td{border-bottom:none;}

    /* ==== Actions ==== */
    .actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      padding:8px 14px;
      border:none;
      border-radius:var(--radius-sm);
      cursor:pointer;
      font-weight:600;
      font-size:13px;
      color:#fff;
      transition:all .25s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:6px;
      position:relative;
      overflow:hidden;
    }
    .btn::before{
      content:'';
      position:absolute;
      top:0; left:-100%;
      width:100%; height:100%;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition:left .6s;
    }
    .btn:hover::before{left:100%;}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(0,0,0,0.15);}
    .btn:active{transform:scale(0.96);}
    .view{background:var(--accent);}
    .grade{background:var(--secondary);}
    .delete{background:var(--danger);}

    /* ==== Empty State ==== */
    .empty{
      text-align:center;
      padding:40px 20px;
      color:var(--muted);
      font-style:italic;
    }

    /* ==== Footer ==== */
    footer{
      text-align:center;
      color:var(--muted);
      font-size:13px;
      padding:40px 20px 60px;
      opacity:0;
      animation:fadeIn 0.8s ease-out 0.6s forwards;
    }

    /* ==== Responsive ==== */
    @media (max-width: 1024px){
      .container{max-width:960px;}
      .stats{grid-template-columns:repeat(2,1fr);}
    }
    @media (max-width: 768px){
      nav{flex-direction:column;gap:12px;padding:14px 20px;}
      nav ul{gap:16px;justify-content:center;flex-wrap:wrap;}
      .container{padding:0 16px;margin:32px auto;}
      .card{padding:24px;}
      .stats{grid-template-columns:1fr;gap:16px;}
      .stat{padding:24px 20px;}
      .search-bar{flex-direction:column;max-width:100%;}
      .search-bar button{width:100%;}
      table{font-size:14px;}
      th,td{padding:12px 10px;}
    }
    @media (max-width: 480px){
      .logo{font-size:18px;}
      nav ul li a{font-size:14px;}
      .stat h3{font-size:28px;}
      .card h2{font-size:20px;}
      .btn{font-size:12px;padding:7px 12px;}
      .actions{gap:6px;}
    }
  </style>
</head>
<body>

  <nav>
    <div class="logo">ProjectHub Admin</div>
    <ul>
      <li><span class="admin-display">Welcome, {{ request.user.username }}</span></li>
      <li><a href="{% url 'admin_logout' %}">Logout</a></li>
    </ul>
  </nav>

  <div class="container">

    <!-- Stats Overview -->
    <div class="stats">
      <div class="stat" style="animation-delay:0.1s;">
        <h3>{{ total_projects }}</h3>
        <p>Total Projects</p>
      </div>
      <div class="stat" style="animation-delay:0.2s;">
        <h3>{{ total_students }}</h3>
        <p>Students Registered</p>
      </div>
      <div class="stat" style="animation-delay:0.3s;">
        <h3>{{ pending_reviews }}</h3>
        <p>Pending Reviews</p>
      </div>
      <div class="stat" style="animation-delay:0.4s;">
        <h3>{{ submission_rate }}%</h3>
        <p>Submission Rate</p>
      </div>
    </div>

    <!-- Recent Projects -->
    <div class="card" style="animation-delay:0.3s;">
      <h2>Recent Project Submissions</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Project Title</th>
              <th>Student</th>
              <th>Date Uploaded</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for project in projects %}
            <tr>
              <td><strong>{{ project.project_title }}</strong></td>
              <td>{{ project.user.fullname }}</td>
              <td>{{ project.date_added|date:"M d, Y" }}</td>
              <td class="actions">
                <a href="{{ project.file.url }}" class="btn view" target="_blank">Eye</a>
                <a href="{% url 'grade_project' project.id %}" class="btn grade">Star</a>
                <a href="{% url 'delete_project' project.id %}" class="btn delete" onclick="return confirm('Delete this project?')">Trash</a>
              </td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="empty">No projects uploaded yet</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- All Students & Grades -->
    <div class="card" style="animation-delay:0.5s;">
      <h2>All Students, Projects & Grades</h2>

      <form method="GET" class="search-bar">
        <input type="text" name="q" placeholder="Search by student name or email..." value="{{ query|default:'' }}">
        <button type="submit">Search</button>
      </form>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Student Name</th>
              <th>Project Title</th>
              <th>Email</th>
              <th>Date</th>
              <th>Grade</th>
              <th>Feedback</th>
            </tr>
          </thead>
          <tbody>
            {% for student in students %}
            <tr>
              <td><strong>{{ student.user.fullname }}</strong></td>
              <td>{{ student.project_title|default:"—" }}</td>
              <td>{{ student.user.email }}</td>
              <td>{{ student.date_added|date:"M d, Y" }}</td>
              <td>
                {% if student.grade %}
                  <span style="color:var(--secondary);font-weight:600;">{{ student.grade }}</span>
                {% else %}
                  <em style="color:var(--muted);">Not graded</em>
                {% endif %}
              </td>
              <td>{{ student.feedback|default:"—"|truncatewords:8 }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="empty">No records found.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <footer>© 2025 ProjectHub Admin Dashboard — Powered by Innovation</footer>

  <!-- Scroll Animations -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.stat, .card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.7s ease-out, transform 0.7s ease-out';
        observer.observe(el);
      });
    });
  </script>

</body>
</html>